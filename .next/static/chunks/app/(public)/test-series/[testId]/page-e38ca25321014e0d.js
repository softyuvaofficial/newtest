(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[580],{2968:(e,t,s)=>{Promise.resolve().then(s.bind(s,9189))},4567:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});var r=s(5647);let a="https://ylpahtavddtsptdcpryx.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlscGFodGF2ZGR0c3B0ZGNwcnl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2ODk3MjYsImV4cCI6MjA2ODI2NTcyNn0.xj1VYpCxtxuJVpALenIh3vkNmHC4Bt07ItiFNf7UoLc";if(!a||!n)throw Error("Missing Supabase environment variables");let i=(0,r.UU)(a,n)},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},9189:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),a=s(2115),n=s(5695),i=s(9543),l=s(4567);let o=[{key:"mock",label:"Mock Tests"},{key:"pyq",label:"Previous Year Questions"},{key:"booster",label:"Booster Tests"}];function c(e){let{params:t}=e,{testId:s}=t,c=(0,n.useRouter)(),{user:u}=(0,i.r)(),[d,h]=(0,a.useState)(!0),[m,b]=(0,a.useState)(null),[x,p]=(0,a.useState)("mock"),[f,N]=(0,a.useState)({mock:[],pyq:[],booster:[]}),[y,g]=(0,a.useState)([]);return((0,a.useEffect)(()=>{s&&(async()=>{h(!0);try{let{data:e,error:t}=await l.N.from("test_series").select("*").eq("id",s).single();if(t)throw t;b(e);let{data:r,error:a}=await l.N.from("tests").select("*").eq("test_series_id",s).order("created_at",{ascending:!0});if(a)throw a;let n={mock:[],pyq:[],booster:[]};if(r.forEach(e=>{n[e.type]&&n[e.type].push(e)}),N(n),u){let{data:e,error:t}=await l.N.from("purchases").select("test_id").eq("user_id",u.id);if(t)throw t;g(e.map(e=>e.test_id))}}catch(e){console.error("Error loading test series:",e.message)}finally{h(!1)}})()},[s,u]),d)?(0,r.jsx)("main",{className:"container mx-auto p-8 text-center",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Loading test series details..."})}):m?(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[(0,r.jsxs)("header",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-2",children:m.title}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:m.description}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded border text-gray-600 whitespace-pre-wrap",children:[(0,r.jsx)("strong",{children:"Syllabus:"}),(0,r.jsx)("br",{}),m.syllabus||"No syllabus information available."]})]}),(0,r.jsx)("nav",{className:"flex space-x-4 mb-6 border-b border-gray-300",children:o.map(e=>{let{key:t,label:s}=e;return(0,r.jsx)("button",{className:"py-2 px-4 -mb-px font-semibold ".concat(x===t?"border-b-4 border-blue-600 text-blue-600":"text-gray-600 hover:text-blue-500"),onClick:()=>p(t),children:s},t)})}),(0,r.jsx)("section",{children:0===f[x].length?(0,r.jsx)("p",{className:"text-gray-600",children:"No tests available in this category."}):(0,r.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:f[x].map(e=>{let t=y.includes(e.id);return(0,r.jsxs)("div",{className:"border rounded shadow p-4 hover:shadow-lg transition relative",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",children:e.title}),(0,r.jsx)("p",{className:"text-gray-600 mb-3 line-clamp-3",children:e.description}),(0,r.jsxs)("p",{className:"text-sm mb-3 font-medium",children:["Duration: ",e.duration," mins | Questions: ",e.question_count]}),(0,r.jsx)("button",{onClick:()=>{t?c.push("/test-series/".concat(s,"/test/").concat(e.id,"/start")):alert("This test is locked. Please purchase to attempt.")},className:"w-full py-2 rounded text-white font-semibold ".concat(t?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),children:t?"Start Test":"Locked"}),(0,r.jsx)("button",{onClick:()=>c.push("/test-series/".concat(s,"/test/").concat(e.id,"/preview")),className:"mt-2 w-full py-2 rounded border border-blue-600 text-blue-600 font-semibold hover:bg-blue-50",children:"View"})]},e.id)})})})]}):(0,r.jsx)("main",{className:"container mx-auto p-8 text-center text-red-600",children:(0,r.jsx)("p",{children:"Test series not found."})})}},9543:(e,t,s)=>{"use strict";s.d(t,{UserAuthProvider:()=>l,r:()=>o});var r=s(5155),a=s(2115),n=s(4567);let i=(0,a.createContext)();function l(e){let{children:t}=e,[s,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[u,d]=(0,a.useState)(!0);async function h(e){let{email:t,password:s}=e;d(!0);let{data:r,error:a}=await n.N.auth.signUp({email:t,password:s});if(d(!1),a)throw a;return r}async function m(e){let{email:t,password:s}=e;d(!0);let{data:r,error:a}=await n.N.auth.signInWithPassword({email:t,password:s});if(d(!1),a)throw a;return r}async function b(){d(!0);let{error:e}=await n.N.auth.signOut();if(d(!1),e)throw e;l(null),c(null)}return(0,a.useEffect)(()=>{n.N.auth.getSession().then(e=>{var t,s;let{data:r}=e;c(r.session),l(null!=(s=null==(t=r.session)?void 0:t.user)?s:null),d(!1)});let{data:e}=n.N.auth.onAuthStateChange((e,t)=>{var s;c(t),l(null!=(s=null==t?void 0:t.user)?s:null),d(!1)});return()=>{e.subscription.unsubscribe()}},[]),(0,r.jsx)(i.Provider,{value:{user:s,session:o,loading:u,signUp:h,signIn:m,signOut:b},children:t})}function o(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useUserAuth must be used within UserAuthProvider");return e}}},e=>{e.O(0,[647,441,964,358],()=>e(e.s=2968)),_N_E=e.O()}]);